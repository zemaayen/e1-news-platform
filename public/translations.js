// Multi-language translations for the news platform
const translations = {
    en: {
        // Navigation
        home: 'Home',
        allNews: 'All News',
        political: 'Political',
        world: 'World',
        technology: 'Technology',
        sports: 'Sports',
        business: 'Business',
        entertainment: 'Entertainment',
        health: 'Health',
        login: 'Login',
        logout: 'Logout',
        search: 'Search news...',
        searchBtn: 'ðŸ”',
        menu: 'Menu',
        categories: 'Categories',
        mostViewed: 'Most Viewed',
        
        // Site Info
        tagline: 'Breaking News 24/7',
        
        // Breaking News
        breakingNews: 'BREAKING NEWS',
        live: 'LIVE',
        
        // Article
        readMore: 'Read More',
        views: 'views',
        comments: 'Comments',
        share: 'Share',
        by: 'By',
        published: 'Published',
        updated: 'Updated',
        
        // Categories
        breaking: 'Breaking',
        
        // Footer
        allRightsReserved: 'All rights reserved.',
        poweredBy: 'Powered by NewsHub Platform',
        copyright: 'Â© 2025',
        
        // View All
        viewAll: 'View All â†’',
        
        // Loading states
        loading: 'Loading articles...',
        noArticles: 'No articles found',
        
        // Date formatting
        months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
        days: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']
    },
    am: {
        // Navigation (Amharic)
        home: 'áˆ˜áŠáˆ»',
        allNews: 'áˆáˆ‰áˆ á‹œáŠ“á‹Žá‰½',
        political: 'á–áˆˆá‰²áŠ«',
        world: 'á‹“áˆˆáˆ',
        technology: 'á‰´áŠ­áŠ–áˆŽáŒ‚',
        sports: 'áˆµá–áˆ­á‰µ',
        business: 'á‰¢á‹áŠáˆµ',
        entertainment: 'áˆ˜á‹áŠ“áŠ›',
        health: 'áŒ¤áŠ“',
        login: 'áŒá‰£',
        logout: 'á‹áŒ£',
        search: 'á‹œáŠ“ áˆáˆáŒ...',
        searchBtn: 'ðŸ”',
        menu: 'áˆáŠ“áˆŒ',
        categories: 'áˆá‹µá‰¦á‰½',
        mostViewed: 'á‰ áŒ£áˆ á‹¨á‰³á‹©',
        
        // Site Info
        tagline: 'áŠ á‹²áˆµ á‹œáŠ“ 24/7',
        
        // Breaking News
        breakingNews: 'áŠ á‹²áˆµ á‹œáŠ“',
        live: 'á‰€áŒ¥á‰³',
        
        // Article
        readMore: 'á‹¨á‰ áˆˆáŒ  á‹«áŠ•á‰¥á‰¡',
        views: 'áŠ¥á‹­á‰³á‹Žá‰½',
        comments: 'áŠ áˆµá‰°á‹«á‹¨á‰¶á‰½',
        share: 'áŠ áŒ‹áˆ«',
        by: 'á‰ ',
        published: 'á‹¨á‰³á‰°áˆ˜',
        updated: 'á‹¨á‰³á‹°áˆ°',
        
        // Categories
        breaking: 'áŠ á‹²áˆµ',
        
        // Footer
        allRightsReserved: 'áˆ˜á‰¥á‰± á‰ áˆ•áŒ á‹¨á‰°áŒ á‰ á‰€ áŠá‹á¢',
        poweredBy: 'á‰  NewsHub Platform á‹¨á‰°áŒˆáŠá‰£',
        copyright: 'Â© 2025',
        
        // View All
        viewAll: 'áˆáˆ‰áŠ•áˆ á‹­áˆ˜áˆáŠ¨á‰± â†’',
        
        // Loading states
        loading: 'áŒ½áˆáŽá‰½áŠ• á‰ áˆ˜áŒ«áŠ• áˆ‹á‹­...',
        noArticles: 'áˆáŠ•áˆ á‹œáŠ“á‹Žá‰½ áŠ áˆá‰°áŒˆáŠ™áˆ',
        
        // Date formatting
        months: ['áŒƒáŠ•á‹‹áˆª', 'áŒá‰¥áˆ©á‹ˆáˆª', 'áˆ›áˆ­á‰½', 'áŠ¤á•áˆªáˆ', 'áˆœá‹­', 'áŒáŠ•', 'áŒáˆ‹á‹­', 'áŠ¦áŒˆáˆµá‰µ', 'áˆ´á•á‰´áˆá‰ áˆ­', 'áŠ¦áŠ­á‰¶á‰ áˆ­', 'áŠ–á‰¬áˆá‰ áˆ­', 'á‹²áˆ´áˆá‰ áˆ­'],
        days: ['áŠ¥áˆá‹µ', 'áˆ°áŠž', 'áˆ›áŠ­áˆ°áŠž', 'áˆ¨á‰¡á‹•', 'áˆáˆ™áˆµ', 'áŠ áˆ­á‰¥', 'á‰…á‹³áˆœ']
    },
    he: {
        // Navigation (Hebrew)
        home: '×‘×™×ª',
        allNews: '×›×œ ×”×—×“×©×•×ª',
        political: '×¤×•×œ×™×˜×™×§×”',
        world: '×¢×•×œ×',
        technology: '×˜×›× ×•×œ×•×’×™×”',
        sports: '×¡×¤×•×¨×˜',
        business: '×¢×¡×§×™×',
        entertainment: '×‘×™×“×•×¨',
        health: '×‘×¨×™××•×ª',
        login: '×”×ª×—×‘×¨',
        logout: '×”×ª× ×ª×§',
        search: '×—×™×¤×•×© ×—×“×©×•×ª...',
        searchBtn: 'ðŸ”',
        menu: '×ª×¤×¨×™×˜',
        categories: '×§×˜×’×•×¨×™×•×ª',
        mostViewed: '×”× ×¦×¤×™× ×‘×™×•×ª×¨',
        
        // Site Info
        tagline: '×—×“×©×•×ª ××—×¨×•× ×•×ª 24/7',
        
        // Breaking News
        breakingNews: '×—×“×©×•×ª ××—×¨×•× ×•×ª',
        live: '×©×™×“×•×¨ ×—×™',
        
        // Article
        readMore: '×§×¨× ×¢×•×“',
        views: '×¦×¤×™×•×ª',
        comments: '×ª×’×•×‘×•×ª',
        share: '×©×ª×£',
        by: '×ž××ª',
        published: '×¤×•×¨×¡×',
        updated: '×¢×•×“×›×Ÿ',
        
        // Categories
        breaking: '×—×“×©',
        
        // Footer
        allRightsReserved: '×›×œ ×”×–×›×•×™×•×ª ×©×ž×•×¨×•×ª.',
        poweredBy: '×ž×•×¤×¢×œ ×¢×œ ×™×“×™ NewsHub Platform',
        copyright: 'Â© 2025',
        
        // View All
        viewAll: 'â† ×¦×¤×” ×‘×”×›×œ',
        
        // Loading states
        loading: '×˜×•×¢×Ÿ ×›×ª×‘×•×ª...',
        noArticles: '×œ× × ×ž×¦××• ×›×ª×‘×•×ª',
        
        // Date formatting
        months: ['×™× ×•××¨', '×¤×‘×¨×•××¨', '×ž×¨×¥', '××¤×¨×™×œ', '×ž××™', '×™×•× ×™', '×™×•×œ×™', '××•×’×•×¡×˜', '×¡×¤×˜×ž×‘×¨', '××•×§×˜×•×‘×¨', '× ×•×‘×ž×‘×¨', '×“×¦×ž×‘×¨'],
        days: ['×¨××©×•×Ÿ', '×©× ×™', '×©×œ×™×©×™', '×¨×‘×™×¢×™', '×—×ž×™×©×™', '×©×™×©×™', '×©×‘×ª']
    }
};

// Get current language (default: English)
let currentLang = localStorage.getItem('preferredLanguage') || 'en';

// Function to get translation
function t(key) {
    return translations[currentLang][key] || translations['en'][key] || key;
}

// Function to change language
function changeLanguage(lang) {
    if (!translations[lang]) {
        console.error('Language not supported:', lang);
        return;
    }
    
    currentLang = lang;
    localStorage.setItem('preferredLanguage', lang);
    
    // Set direction for RTL languages
    if (lang === 'he') {
        document.body.setAttribute('dir', 'rtl');
    } else {
        document.body.setAttribute('dir', 'ltr');
    }
    
    // Update all translatable elements
    updatePageTranslations();
    
    // Trigger re-rendering of article sections if the function exists
    if (typeof displayCategorySections === 'function') {
        displayCategorySections();
    }
}

// Function to update all translations on the page
function updatePageTranslations() {
    // Update navigation
    document.querySelectorAll('[data-translate]').forEach(el => {
        const key = el.getAttribute('data-translate');
        if (translations[currentLang][key]) {
            if (el.tagName === 'INPUT' && el.type === 'text') {
                el.placeholder = translations[currentLang][key];
            } else {
                el.textContent = translations[currentLang][key];
            }
        }
    });
    
    // Update tagline
    const taglineElement = document.getElementById('siteTagline');
    if (taglineElement) {
        taglineElement.textContent = t('tagline');
    }
    
    // Update all section headers with category names
    document.querySelectorAll('.section-title').forEach(el => {
        const categoryText = el.textContent.trim();
        const categoryKey = categoryText.toLowerCase();
        if (translations[currentLang][categoryKey]) {
            el.textContent = translations[currentLang][categoryKey];
        }
    });
    
    // Update "View All" links
    document.querySelectorAll('a[href="#"]').forEach(el => {
        if (el.textContent.includes('View All') || el.textContent.includes('áˆáˆ‰áŠ•áˆ') || el.textContent.includes('×¦×¤×” ×‘×”×›×œ')) {
            el.textContent = t('viewAll');
        }
    });
    
    // Update category badges
    document.querySelectorAll('.category-badge').forEach(el => {
        const categoryText = el.textContent.trim();
        const categoryKey = categoryText.toLowerCase();
        if (translations[currentLang][categoryKey]) {
            el.textContent = translations[currentLang][categoryKey];
        }
    });
    
    // Update footer
    const footerText = document.querySelector('.footer p');
    if (footerText) {
        const siteName = document.getElementById('footerSiteName') ? document.getElementById('footerSiteName').textContent : 'NewsHub';
        footerText.innerHTML = `${t('copyright')} <strong id="footerSiteName">${siteName}</strong>. ${t('allRightsReserved')} | ${t('poweredBy')}`;
    }
    
    // Update loading text if visible
    const loadingText = document.querySelector('#loading p');
    if (loadingText && loadingText.textContent.includes('Loading')) {
        loadingText.textContent = t('loading');
    }
    
    // Update date/time display
    updateDateTime();
}

// Format date based on current language
function formatDate(date) {
    const lang = currentLang;
    const t = translations[lang];
    const day = t.days[date.getDay()];
    const month = t.months[date.getMonth()];
    const dayNum = date.getDate();
    const year = date.getFullYear();
    
    if (lang === 'am') {
        return `${day}á£ ${month} ${dayNum}á£ ${year}`;
    } else if (lang === 'he') {
        return `${day}, ${dayNum} ${month} ${year}`;
    } else {
        return `${day}, ${month} ${dayNum}, ${year}`;
    }
}

// Format time in 24-hour format
function formatTime(date) {
    const hours = String(date.getHours()).padStart(2, '0');
    const minutes = String(date.getMinutes()).padStart(2, '0');
    const seconds = String(date.getSeconds()).padStart(2, '0');
    return `${hours}:${minutes}:${seconds}`;
}

// Update date and time display
function updateDateTime() {
    const now = new Date();
    const dateElement = document.getElementById('currentDate');
    const timeElement = document.getElementById('currentTime');
    
    if (dateElement) {
        dateElement.textContent = formatDate(now);
    }
    
    if (timeElement) {
        timeElement.textContent = formatTime(now);
    }
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', () => {
    // Set initial language direction
    if (currentLang === 'he') {
        document.body.setAttribute('dir', 'rtl');
    }
    
    // Update language button states
    document.querySelectorAll('.lang-btn').forEach(btn => {
        if (btn.dataset.lang === currentLang) {
            btn.classList.add('active');
        } else {
            btn.classList.remove('active');
        }
    });
    
    // Add click handlers to language buttons
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const lang = btn.dataset.lang;
            
            // Update button states
            document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            // Change language
            changeLanguage(lang);
        });
    });
    
    // Initial date/time update
    updateDateTime();
    
    // Update date/time every second
    setInterval(updateDateTime, 1000);
    
    // Initial translation update
    updatePageTranslations();
});

